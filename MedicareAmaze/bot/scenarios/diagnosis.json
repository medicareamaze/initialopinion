{
  "id": "diagnosis",
  "version": "112",
  "type": "sequence",
  "steps": [


    {
      "id": "welcomeCard",
      "type": "heroCard",
      "data": {
        "title": "Welcome to DOC Bot",
        "text": "Hi There! I am Prof. Winston Davidson, Medical Doctor. My artificially intelligent bot will ask you a series of questions and based on your responses, it will provide you a pre-diagnosis and recommend the next steps. It can also help you screen for the **Corona Virus Infection**"

      }
    },

    {
      "id": "location",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Please select your country of residence",
        "options": [ "Jamaica", "USA", "India" ]
      }
    },
    {
      "id": "gender",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Please select your gender",
        "options": [ "male", "female" ]
      }
    },
    {
      "id": "dob",
      "type": "prompt",
      "data": {
        "type": "time",
        "text": "Enter your date of birth (mm/dd/yyyy)"
      }
    },
    {
      "id": "height",
      "type": "prompt",
      "data": {
        "type": "number",
        "text": "Enter your height (in Inches)"
      }
    },
    {
      "id": "weight",
      "type": "prompt",
      "data": {
        "type": "number",
        "text": "Enter your weight (in pounds)"
      }
    },
    {
      "id": "s_98",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you have fever?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "s_105",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you have dry cough?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "s_2100",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you feel tired and weak?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "s_526",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "When you cough, do you produce yellow or green sputum?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "s_1462",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you have shortness of breath?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "s_252",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you have sore throat?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "s_21",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you have headache?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "s_81",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you have chills?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "s_8",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you have  diarrhea?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "s_156",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you have vomiting?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "s_11",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you cough up  blood or blood-stained mucus?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "p_8",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you have diabetes?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "p_9",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you suffer from hypetension?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "p_178",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you have or did you ever have Cancer?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "z_101",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you have heart diseases?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },

    {
      "id": "z_102",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you have chronic respiratory disease?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "casual_contact",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Have you made any casual contact with any one with the coronavirus?",
        "options": [ "Yes", "No" ,"Dont Know"]
      }
    },
    {
      "id": "close_contact",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Have you made close contact with anyone with the coronavirus?",
        "options": [ "Yes", "No","Dont Know" ]
      }
    },
    {
      "id": "complaint",
      "type": "prompt",
      "data": {
        "type": "text",
        "text": "Do you have any other complaints?  \n You can enter phrases like **I have headache and body pain** "
      }
    },
    {
      "id": "initialSymptomsProcess001",
      "type": "initialSymptomsProcess",
      "data": { "mobileNumber": "<%mobileNumber%>" }
    },

    {
      "id": "initiateDiagnosisInterview001",
      "type": "initiateDiagnosisInterview",
      "data": { "mobileNumber": "<%mobileNumber%>" }
    },





    {
      "id": "nextQuestion",
      "type": "sequence",
      "scenarios": [
        {
          "condition": "should_stop == false",
          "steps": [
            {
              "id": "luisretry.false",
              "type": "prompt",
              "data": {
                "type": "choice",
                "text": "<%next_question%>",
                "options": [ "Yes", "No", "Dont Know" ]
              }
            },
            {
              "id": "processDiagnosisResponse002",
              "type": "processDiagnosisResponse",
              "data": { "mobileNumber": "<%mobileNumber%>" },
              "scenarios": [
                {
                  "condition": "should_stop == false",
                  "nodeId": "nextQuestion"
                },

                {
                  "condition": "should_stop == true",
                  "steps": [
                    {
                      "id": "firstAndLastName",
                      "type": "prompt",
                      "data": {
                        "type": "text",
                        "text": "I am ready with my diagnosis. I just need your name and contact details\n\n. **Please enter your name**"
                      }
                    },
                    {
                      "id": "mobileNumber",
                      "type": "prompt",
                      "data": {
                        "type": "text",
                        "text": "Please enter your 10 digit mobile number including the area code.",
                        "validation": {
                          "type": "regex",
                          "setup": {
                            "pattern": "^[+]?([0-9]*[\\.\\s\\-\\(\\)]|[0-9]+){10,13}$"
                          }
                        }
                      }
                    },
                   

                    {
                      "id": "luisretry.true",
                      "type": "text",
                      "data": {
                        "text": "**Conditions -**\n\n<%conditions%>"
                      }
                    }

                  ]
                }
              ]
            }

          ]
        }
      ]
    },

    {
      "id": "nextStep",
      "type": "sequence",
      "steps": [
        {
          "id": "talkToDoc",
          "type": "prompt",
          "data": {
            "type": "confirm",
            "text": "Do you want to Chat with a Doc?"
          },
          "scenarios": [
            {
              "condition": "talkToDoc",
              "steps": [
                {
                  "id": "docTime",
                  "type": "prompt",
                  "data": {
                    "type": "time",
                    "text": "What's the best time for the docor to call you today?"
                  }
                },
                {
                  "id": "docTimeThanks",
                  "type": "text",
                  "data": {
                    "text": "Thank you! I'll have the doctor call you asap!"
                  },
                  "scenarios": [
                    {
                      "condition": "talkToDoc",
                      "nodeId": "welcomeCard"
                    }
                  ]
                }


              ]
            },
            {
              "condition": "!talkToDoc",
              "steps": [
                {
                  "id": "sureNotTalkingToDoc",
                  "type": "prompt",
                  "data": {
                    "type": "confirm",
                    "text": "Are you sure?"
                  },
                  "scenarios": [
                    {
                      "condition": "!sureNotTalkingToDoc",
                      "nodeId": "talkToDoc"
                    },
                    {
                      "condition": "sureNotTalkingToDoc",
                      "nodeId": "welcomeCard"
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
{
  "id": "diagnosis",
  "version": "112",
  "type": "sequence",
  "steps": [


    {
      "id": "welcomeCard",
      "type": "heroCard",
      "data": {
        "title": "Initial Opinion",
        "text": "Hey There! I will ask you a sereis of questions and based on your responses and my artificial intelligence, I will provide you an initial dignosis and recommend doctors! You can remotely connect with the doctor of your choice  using our awesome mobile app - Doctor On Call!",
        "images": [
          "https://www.hcd.com/wp-content/uploads/2017/07/diagnosis.png"
        ]
      }
    },

    {
      "id": "location",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Please select your country of residence",
        "options": [ "Jamaica", "USA", "India" ]
      }
    },
    {
      "id": "gender",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Please select your gender",
        "options": [ "male", "female" ]
      }
    },
    {
      "id": "dob",
      "type": "prompt",
      "data": {
        "type": "time",
        "text": "Enter your date of birth (mm/dd/yyyy)"
      }
    },
    {
      "id": "height",
      "type": "prompt",
      "data": {
        "type": "number",
        "text": "Enter your height (in Inches)"
      }
    },
    {
      "id": "weight",
      "type": "prompt",
      "data": {
        "type": "number",
        "text": "Enter your weight (in pounds)"
      }
    },
    {
      "id": "p_8",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you have diabetes?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "p_9",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you suffer from hypetension?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "p_10",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you have high cholesterol?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "p_28",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you smoke tobacco?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "p_69",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Do you use marijuana?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "p_147",
      "type": "prompt",
      "data": {
        "type": "choice",
        "text": "Did you suffer from any physical injuries recently?",
        "options": [ "Yes", "No", "Dont Know" ]
      }
    },
    {
      "id": "complaint",
      "type": "prompt",
      "data": {
        "type": "text",
        "text": "How do you feel? What is your complaint? \n You can enter phrases like **I have headache and body pain** "
      }
    },
    {
      "id": "initialSymptomsProcess001",
      "type": "initialSymptomsProcess",
      "data": { "mobileNumber": "<%mobileNumber%>" }
    },

    {
      "id": "initiateDiagnosisInterview001",
      "type": "initiateDiagnosisInterview",
      "data": { "mobileNumber": "<%mobileNumber%>" }
    },





    {
      "id": "nextQuestion",
      "type": "sequence",
      "scenarios": [
        {
          "condition": "should_stop == false",
          "steps": [
            {
              "id": "luisretry.false",
              "type": "prompt",
              "data": {
                "type": "choice",
                "text": "<%next_question%>",
                "options": [ "Yes", "No", "Dont Know" ]
              }
            },
            {
              "id": "processDiagnosisResponse002",
              "type": "processDiagnosisResponse",
              "data": { "mobileNumber": "<%mobileNumber%>" },
              "scenarios": [
                {
                  "condition": "should_stop == false",
                  "nodeId": "nextQuestion"
                },

                {
                  "condition": "should_stop == true",
                  "steps": [
                    {
                      "id": "firstAndLastName",
                      "type": "prompt",
                      "data": {
                        "type": "text",
                        "text": "I am ready with my diagnosis. I just need your name and contact details\n\n. **Please enter your name**"
                      }
                    },
                    {
                      "id": "mobileNumber",
                      "type": "prompt",
                      "data": {
                        "type": "text",
                        "text": "Please enter your 10 digit mobile number including the area code.",
                        "validation": {
                          "type": "regex",
                          "setup": {
                            "pattern": "^[+]?([0-9]*[\\.\\s\\-\\(\\)]|[0-9]+){10,13}$"
                          }
                        }
                      }
                    },
                    {
                      "id": "customTypeSendMobileCode",
                      "type": "sendRegistrationMobileCode",
                      "data": { "mobileNumber": "<%mobileNumber%>" }
                    },
                    {
                      "id": "validationCode",
                      "type": "prompt",
                      "data": {
                        "type": "number",
                        "text": "Please enter the 4 digit validation code that was texted to <%mobileNumber%>",
                        "validation": {
                          "type": "regex",
                          "setup": {
                            "pattern": "[0-9]{4}"
                          }
                        }
                      }
                    },
                    {
                      "id": "customTypevalidateMobileCode",
                      "type": "validateMobileCode",
                      "data": {
                        "mobileNumber": "<%mobileNumber%>",
                        "validationCode": "<%validationCode%>"
                      }
                    },

                    {
                      "id": "luisretry.true",
                      "type": "text",
                      "data": {
                        "text": "**Conditions -**\n\n<%conditions%>"
                      }
                    }

                  ]
                }
              ]
            }

          ]
        }
      ]
    },

    {
      "id": "nextStep",
      "type": "sequence",
      "steps": [
        {
          "id": "talkToDoc",
          "type": "prompt",
          "data": {
            "type": "confirm",
            "text": "Do you want to Chat with a Doc?"
          },
          "scenarios": [
            {
              "condition": "talkToDoc",
              "steps": [
                {
                  "id": "docTime",
                  "type": "prompt",
                  "data": {
                    "type": "time",
                    "text": "What's the best time for the docor to call you today?"
                  }
                },
                {
                  "id": "docTimeThanks",
                  "type": "text",
                  "data": {
                    "text": "Thank you! I'll have the doctor call you asap!"
                  },
                  "scenarios": [
                    {
                      "condition": "talkToDoc",
                      "nodeId": "welcomeCard"
                    }
                  ]
                }


              ]
            },
            {
              "condition": "!talkToDoc",
              "steps": [
                {
                  "id": "sureNotTalkingToDoc",
                  "type": "prompt",
                  "data": {
                    "type": "confirm",
                    "text": "Are you sure?"
                  },
                  "scenarios": [
                    {
                      "condition": "!sureNotTalkingToDoc",
                      "nodeId": "talkToDoc"
                    },
                    {
                      "condition": "sureNotTalkingToDoc",
                      "nodeId": "welcomeCard"
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}